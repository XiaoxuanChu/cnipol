<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--
******************************************************************************
*
******************************************************************************
-->

<html>
<head>
  <title>Run Summary and Fast Offline Results (Index)</title>
  <link REL="STYLESHEET" TYPE="text/css" HREF="main.css">
</head>

<body bgcolor="#ffffff">

<table border="0" cellpadding="0" cellspacing="0" align="center" width="100%">
<tr>
<td width="10%">

<td width="80%">

<!-- Main text starts here-->

<h1>Cnipol Run Index</h1>

<p><a name="content"/>


<table border="0" cellpadding="2" cellspacing="2" align="center" width="100%">

<?php

foreach($rs as $gRunId):

$rc = array();

include(DATA_DIR."/$gRunId/runconfig.php");

if (count($rc) == 0) continue;

?>

<tr>
   <td width=10%>&nbsp;
   <td width=90%>&nbsp;

<tr>
   <td class=align_lb>
   <a href=index.php?runid=<?=$gRunId?> ><?=$gRunId?></a>

<?
$runName = "unknown";

if ($rc['CMODE'] == 0) $runName = "Run {$rc['runName']}";
else $runName = "Calibration/Test Run {$rc['runName']}";

$polStream = "";
//$polStream = "unknown";

if ($rc['fPolStream'] == 1 ) $polStream = ", Upstream";
if ($rc['fPolStream'] == 2 ) $polStream = ", Downstream";

$beam = $rc['fPolBeam'];

?>

   <td>
      <span class=my-h2><?=$runName?></span>
      &nbsp; &nbsp; &nbsp;
      <span class=s150>
      <?=( isset($beam) ?
           ($beam == 2 ? "<span class=blue3>{$RHIC_BEAM[$beam]}</span>" :
                         "<span class=yellow3>{$RHIC_BEAM[$beam]}</span>") : "Unknown");?> <?=$polStream?>
		<!--
      &nbsp; &nbsp;
      Polarimeter <?//=$rc['PolarimetryID']?>
		-->
      </span>


<tr>
   <td>
   <td>

<table border="1" cellpadding="3" cellspacing="0" align="center" width="100%">
<tr>
   <td>
   <b>Run Start Time:</b> <?=date("M j, Y H:i:s", $rc['StartTime'])?>&nbsp;
   (<?=dateTimeDiff($rc['StartTime'], $rc['StopTime'])?>)
   <td>
   <b>Total Events:</b> <?=number_format($rc['nEventsTotal'])?>
   <td>
   <b>Beam Energy:</b> <?=sprintf("%10.3f", $rc['BeamEnergy'])?>&nbsp;GeV
   <td>
   <b>Active Strips:</b> <?=$rc['NActiveStrip']?>
   <!--
   <b>Size:</b> <?//=$s['dirsize']?>
   -->

<tr>
   <td>
   <!--<b>Run End Time:</b> <?//=date("M j, Y H:i:s", $rc['StopTime'])?>-->
   <b>Processed Offline:</b> <?=date("M j, Y H:i:s", $rc['procDateTime'])?>&nbsp;
   (<?=sprintf("%.0f", $rc['procTimeReal']);?>s)
   <td>
   <b>Events Processed:</b> <?=number_format($rc['nEventsProcessed'])?>
   <? if ($rc['thinout'] > 1): ?><br>(every <?=ordinal_suffix($rc['thinout'])?> event)
   <? endif; ?>
   <td>
   <b>Target ID:</b> <?=$rc['targetID']?>
   <td>
   <b>Disabled Strips:</b> <?=$rc['NDisableStrip']?>

<!--
<tr>
   <td colspan=4>

   <table border="1" cellpadding="0" cellspacing="0" align="center" width="100%">
   <?php
   //   $row1 = ""; $row2 = "";

   // foreach($rc['ActiveStrip'] as $chanId => $siS) {

   //      $chanId += 1;

   //    $row1 .= "<td><a href=./?runid=$gRunId&chanid=$chanId>$chanId</a>";
   //    //$row2 .= "<td>".($siS ? "x" : "o");
   //
   //    if (($chanId) % 36 == 0) {
   //       //print "<tr class=align_cm>$row1\n<tr class=align_cm>$row2";
   //       print "<tr class=align_cm>$row1\n";
   //         $row1 = "";// $row2 = "";
   //    }
   // }
   ?>
   </table>
-->

</table>

<?php
endforeach;
?>

</table>


<pre>
<?php //print_r($rc); ?>
</pre>


<!-- Main text ends here-->

<td width="10%">

<tr>
<td width="10%">

<td width="80%">

<p>&nbsp;<br>
<hr width="100%" size="2">

<div align="left">
</div>

<td width="10%">

</table>

</body>
</html>
