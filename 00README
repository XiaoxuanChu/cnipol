# 00README
# Feb.8,2006
# I. Nakagawa
# pC offline analysis package

Some key directories under CNI library: 
CNILIB=/usr/local/cnipol

% ls $CNIPOL
   data/   online/  share/

data/ 
  symboric links to 2005 data available on pb2pb.phy.bnl.gov

online/
    hbook/  : symboric link to online hbook files.
    log/    : symboric link to online log files.

share/
    calib/  : database for the energy calibration 
    config/ : configulation database for analysis program Asym
    macro/  : macro for plotting and deadlayer fits.
    bin/    : executable binaries and scripts. 

SRC
  cnipol/src
	AsymMain.cc    "main program. hundle options"
	AsymRead.cc    "read in raw data and decode"
	AsymRunDB.cc   "read in condistions for runs from run.db" 
	AsymHbook.cc   "histogram booking"
	hb_lib.f       "utility library to call hbook from c++"
	AsymProcess.cc "event looop processing program"
   	AsymCalc.cc    "end of run routine"
	RunDBReader.cc "portable RunDB read program"

	Asym.h
	AsymMain.h
	rpoldata.h
	rhicpol.h
	WeightedMean.h
		
  Executables : 
	Asym          "Main analysis program"
	RunDBReader   "portable run.db reader/printer"



Get SRC files from cvs server:
	
	export CVSROOT=:pserver:e950@cvs.bnl.gov:/data01/CVS
	
	% cvs login 
	CVS password: (standard e950 password)
	% cvs checkout cnipol
        sources will be downloaded in ./cnipol directory.

Set up environment and install executables and macros.

1. Environmental variables (in bash format)

	export CNILIB=/usr/local/cnipol
	export ONLINEDIR=$CNILIB/online
	export DATADIR=$CNILIB/data
	export SHAREDIR=$CNILIB/share
	export CONFDIR=$SHAREDIR/config
	export CALIBDIR=$SHAREDIR/calib
	# working directory
	export ASYMDIR=$HOME/2005/offline/asym

	# installation destination 
	export INSTALLDIR=$ASYMDIR/bin
	export MACRODIR=$ASYMDIR/kumac
#    for developers use followings instead of above two lines
#	export INSTALLDIR=$SHAREDIR/bin
#	export MACRODIR=$SHAREDIR/kumac

	export PATH=$INSTALLDIR:$PATH

2. Make and install src files:
	% cd cnipol
	% source ~/.bashrc
	% ./install.sh


3. Add following lines to your $HOME/.pawlogon.kumac

	alias/cr pson 'exe ~/.pawlogon#on'
	alias/cr psoff 'exe ~/.pawlogon#off'
	opt zfl1	
	FILECASE keep
	defaults ./kumac,$ENV(KUMACDIR)

	*===================================================
	macro on fn=paw.ps met=-111
	 fortran/file 66 [fn]
	 graphics/metafile 66 [met]
	return

	*===================================================
	macro off 
	 close 66
	return

	*===================================================
	macro eon fn=paw.eps met=-113
	 fortran/file 66 [fn]
	 graphics/metafile 66 [met]
	return




Working directory and Running executables:

	create working directory
	% mkdir $ASYMDIR
	% cd $ASYMDIR
	% cp $HOME/cnipol/run.db .
	       or
	% ln -s $HOME/cnipol/run.db .
	
	 run.db has to be at working directory
	 see 00README.rundb for syntax (not yet available)

	% Asym -f 7069.101.data
	try Asym -h for options
    
  outputs:
	hbookfile: outsampleex.hbook
    
    

Some utility to run Asym and histogram brawsing
   %> RHICAna.pl &

    Some directrories to be created
    $ASYMDIR/hbook                   : store hbook files
    $ASYMDIR/log                     : offline log directory	   
    $ASYMDIR/ps                      : for postscript outputs


  * Useful instructions by Osamu:
    http://www4.rcf.bnl.gov/~cnipol/Analysis/OsamuDocs/index.html

    o   Brief summary of online monitoring scripts
    o   CNI polarimeter monitoring GUI user guide  
    




###################################################################
#########   For Calibration and DeadLayer Studies:       ##########
###################################################################


	
Create necessary directories:

	% mkdir $ASYMDIR/douts
	% mkdir $ASYMDIR/calib
	% mkdir $ASYMDIR/config
	% mkdir $ASYMDIR/integ



